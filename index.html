<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Physio Routine App</title>
  <style>
    /* Global Styles */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Arial, sans-serif;
      background: #f7faff;
      color: #333;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
    }
    button { 
      padding: 0.6rem; 
      font-size: 1rem;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: #3a7bc8; }
    select, input { 
      padding: 0.5rem; 
      font-size: 1rem; 
      margin-bottom: 0.5rem; 
      width: 100%; 
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    h1, h2 { margin-bottom: 1rem; color: #2c3e50; }
    .exercise-item { 
      padding: 0.8rem; 
      border-bottom: 1px solid #ddd; 
      display: flex; 
      justify-content: space-between;
      align-items: center;
      background: white;
      margin-bottom: 0.5rem;
      border-radius: 4px;
    }
    .controls { 
      display: flex; 
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .controls button { 
      padding: 0.8rem 1.2rem;
      font-size: 1.1rem;
    }
    .progress { 
      margin-top: 1rem; 
      text-align: center; 
      font-size: 1.2rem;
      background: white;
      padding: 1rem;
      border-radius: 4px;
    }
    svg { 
      width: 150px; 
      height: 150px; 
      margin: 1rem auto; 
      display: block; 
    }
    .offline { 
      color: green; 
      font-weight: bold;
      font-size: 0.9rem;
      margin-left: 1rem;
    }
    header {
      display: flex;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    #toggleView {
      margin-left: auto;
      background: #2c3e50;
    }
    #exerciseSvg {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .exercise-info {
      margin-right: 1rem;
    }

    /* Corrected View Display Logic */
    .view { display: none; }
    .view.active { display: block; }

    @media (max-width: 480px) {
      body { padding: 0.5rem; }
      .controls { flex-wrap: wrap; }
      .controls button { flex: 1 1 30%; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Physio Routine</h1>
    <span id="offlineStatus" class="offline">Online</span>
    <button id="toggleView">Switch to Player</button>
  </header>

  <main>
    <!-- Routine Builder -->
    <section id="builderView" class="view active">
      <h2>Build Your Routine</h2>
      <select id="exerciseSelect">
        <option value="">Select an exercise</option>
      </select>
      <input type="number" id="reps" placeholder="Repetitions (e.g., 5)" min="1" value="5">
      <input type="number" id="duration" placeholder="Duration (seconds)" min="1" value="30">
      <input type="number" id="cycles" placeholder="Cycles (e.g., 2)" min="1" value="2">
      <button id="addExercise">Add to Routine</button>

      <div id="routineList" style="margin-top: 1.5rem;"></div>

      <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem;">
        <button id="saveRoutine" style="flex: 1;">Save Routine</button>
        <button id="startRoutine" style="flex: 1; background: #27ae60;">Start Routine</button>
      </div>
    </section>

    <!-- Exercise Player -->
    <section id="playerView" class="view">
      <h2 id="currentExerciseName">Ready to Start</h2>
      <div id="exerciseSvg"></div>
      <div class="progress">
        <p id="repCounter">Reps: 0</p>
        <p id="cycleCounter">Cycle: 0/0</p>
        <p id="timer">00s</p>
      </div>
      <div class="controls">
        <button id="prev">Previous</button>
        <button id="playPause">Pause</button>
        <button id="next">Next</button>
      </div>
      <button id="backToBuilder" style="width: 100%; margin-top: 1rem; background: #e74c3c;">Back to Builder</button>
    </section>
  </main>

<script>
  // Paste your original JavaScript here exactly as it was provided.
  // (Your original JavaScript is correct and can be used unchanged.)

  // Just ensure your DOMContentLoaded event listener remains intact:
  document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
